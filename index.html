<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Vape Nebula offers premium vape products with fast delivery across the Netherlands.">
  <meta name="keywords" content="vape, e-cigarette, Netherlands, vape shop">
  <title>Vape Nebula</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&family=Exo+2:wght@400;700&family=Montserrat:wght@400;600&family=Dancing+Script:wght@400;700&family=Impact&display=swap" rel="stylesheet">
  <style>
    /* Reset default styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* Body with cosmic background */
    body {
      font-family: 'Montserrat', 'Roboto', 'Arial', sans-serif;
      background: linear-gradient(180deg, #0a0a23 0%, #1a1a3d 100%);
      color: #e0e0ff;
      position: relative;
      overflow-x: hidden;
      min-height: 100vh;
      overscroll-behavior: none;
    }

    /* Starry background effect */
    .stars {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('https://www.transparenttextures.com/patterns/stardust.png') repeat;
      opacity: 0.6;
      z-index: -3;
    }

    /* Nebula effect */
    .nebulae {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(circle at 30% 70%, rgba(147, 0, 255, 0.3), transparent 70%),
                  radial-gradient(circle at 70% 30%, rgba(0, 255, 191, 0.3), transparent 70%);
      z-index: -2;
      animation: nebulaPulse 15s infinite alternate;
    }

    /* Alien particles */
    .alien-particles::before,
    .alien-particles::after {
      content: '';
      position: absolute;
      width: 2px;
      height: 2px;
      background: #00ffcc;
      box-shadow: 0 0 10px #00ffcc, 0 0 20px #00ffcc;
      animation: particleFloat 10s infinite linear;
    }
    .alien-particles::after {
      background: #ff00ff;
      box-shadow: 0 0 10px #ff00ff, 0 0 20px #ff00ff;
      animation: particleFloat 12s infinite linear reverse;
      top: 80%;
      left: 90%;
    }

    /* Animations */
    @keyframes vaporwaveFade {
      0% { text-shadow: 0 0 5px #fff, 0 0 10px #ff00ff, 0 0 20px #ff00ff, 0 0 40px #00ffcc; }
      50% { text-shadow: 0 0 10px #fff, 0 0 20px #ff00ff, 0 0 30px #ff00ff, 0 0 60px #00ffcc; }
      100% { text-shadow: 0 0 5px #fff, 0 0 10px #ff00ff, 0 0 20px #ff00ff, 0 0 40px #00ffcc; }
    }

    @keyframes float {
      0% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0); }
    }

    @keyframes infoFloat {
      0% { transform: translateY(0); }
      50% { transform: translateY(-1px); }
      100% { transform: translateY(0); }
    }

    @keyframes scrollText {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    @keyframes nebulaPulse {
      0% { opacity: 0.5; transform: scale(1); }
      100% { opacity: 0.8; transform: scale(1.05); }
    }

    @keyframes particleFloat {
      0% { transform: translate(0, 0); }
      100% { transform: translate(100vw, 100vh); }
    }

    @keyframes popUp {
      0% { opacity: 0; transform: scale(0.7) translateY(20px); }
      100% { opacity: 1; transform: scale(1) translateY(0); }
    }

    @keyframes neonPulse {
      0% { opacity: 0.7; }
      50% { opacity: 1; }
      100% { opacity: 0.7; }
    }

    @keyframes flavorGlow {
      0% {
        background: rgba(10, 10, 40, 0.7);
        border-color: #00ffcc;
        box-shadow: 0 0 10px #00ffcc, 0 0 20px #ff00ff;
      }
      50% {
        background: linear-gradient(45deg, #ff00ff, #00ffcc);
        border-color: #ff00ff;
        box-shadow: 0 0 20px #ff00ff, 0 0 30px #00ffcc;
      }
      100% {
        background: rgba(50, 50, 100, 0.9);
        border-color: #ff00ff;
        box-shadow: 0 0 15px #ff00ff, 0 0 25px #00ffcc;
      }
    }

    /* Heading container */
    .heading-container {
      position: relative;
      display: inline-block;
      margin: 0 auto;
      width: 100%;
      text-align: center;
      z-index: 1;
    }

    h1 {
      font-family: 'Exo 2', 'Roboto', sans-serif;
      font-size: 2.5rem;
      padding: 1rem;
      animation: vaporwaveFade 3s infinite;
      color: #e0e0ff;
      text-shadow: 0 0 10px #00ffcc, 0 0 20px #ff00ff;
      background: rgba(10, 10, 40, 0.7);
      border-radius: 10px;
      display: inline-block;
    }

    /* Scrolling text */
    .scrolling-text {
      overflow: hidden;
      width: 100%;
      background: rgba(10, 10, 40, 0.5);
      padding: 0.5rem 0;
      box-shadow: 0 0 10px #ff00ff;
      border: 1px solid #00ffcc;
    }

    .scrolling-text-container {
      display: inline-flex;
      white-space: nowrap;
      animation: scrollText linear infinite;
      will-change: transform;
    }

    .scrolling-text p {
      font-family: 'Montserrat', sans-serif;
      font-size: 1rem;
      margin: 0;
      padding-right: 2rem;
      color: #00ffcc;
      text-shadow: 0 0 5px #ff00ff;
    }

    /* Filter header */
    .filter-header {
      display: flex;
      justify-content: center;
      gap: 1rem;
      padding: 1rem;
      background: rgba(10, 10, 40, 0.9);
      border: 1px solid #ff00ff;
      border-radius: 10px;
      margin: 1rem;
      box-shadow: 0 0 10px #00ffcc, 0 0 20px #ff00ff;
      animation: neonPulse 2s infinite;
    }

    .filter-item {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .filter-icon {
      font-size: 1.2rem;
      color: #e0e0ff;
      text-shadow: 0 0 5px #ff00ff, 0 0 10px #00ffcc;
    }

    .filter-header select {
      background: rgba(50, 50, 100, 0.5);
      color: #e0e0ff;
      border: 2px solid #ff00ff;
      border-radius: 10px;
      padding: 0.5rem 0.75rem;
      font-family: 'Montserrat', sans-serif;
      font-size: 1rem;
      cursor: pointer;
      transition: border-color 0.2s;
    }

    .filter-header select:hover {
      border-color: #00ffcc;
    }

    /* Vape and flavor lists */
    .vape-list, .flavour-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 1rem;
      padding: 1rem;
    }

    .card {
      position: relative;
      background: rgba(10, 10, 40, 0.7);
      border: 2px solid #00ffcc;
      border-radius: 10px;
      padding: 1rem;
      text-align: center;
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease, border-color 0.3s ease;
      animation: float 3s ease-in-out infinite, popUp 0.5s ease forwards;
      box-shadow: 0 0 10px #00ffcc, 0 0 20px #ff00ff;
    }

    .card:hover {
      transform: scale(1.05);
      box-shadow: 0 0 15px #00ffcc, 0 0 30px #ff00ff;
    }

    .card.selected {
      animation: flavorGlow 1s ease-in-out forwards;
      transform: scale(1.05);
    }

    .card img {
      width: 100%;
      height: 60%;
      object-fit: contain;
      border-radius: 8px;
      margin-bottom: 0.5rem;
    }

    .flavour-list img.vape-image {
      max-width: 200px;
      border-radius: 10px;
      margin: 1rem auto;
      display: block;
      box-shadow: 0 0 10px #ff00ff;
      cursor: pointer;
    }

    .card-name {
      font-family: 'Exo 2', sans-serif;
      font-size: 1.2rem;
      font-weight: 700;
      color: #00ffcc;
      text-shadow: 0 0 5px #ff00ff;
      margin-bottom: 0.3rem;
    }

    .card-description {
      font-family: 'Montserrat', sans-serif;
      font-size: 0.9rem;
      color: #e0e0ff;
      text-shadow: 0 0 3px #ff00ff;
      margin-bottom: 0.3rem;
    }

    .card-price {
      font-family: 'Exo 2', sans-serif;
      font-size: 1.2rem;
      font-weight: 700;
      color: #ff00ff;
      text-shadow: 0 0 5px #00ffcc;
    }

    /* Buttons */
    button {
      background: linear-gradient(45deg, #ff00ff, #00ffcc);
      color: #0a0a23;
      font-family: 'Montserrat', sans-serif;
      font-weight: 600;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 25px;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.3s;
    }

    button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 15px #ff00ff;
    }

    button:disabled {
      background: linear-gradient(45deg, #666, #999);
      cursor: not-allowed;
    }

    /* Cart */
    .cart {
      flex-direction: column;
      align-items: center;
      padding: 2rem;
      background: rgba(10, 10, 40, 0.7);
      border: 1px solid #ff00ff;
      border-radius: 10px;
      box-shadow: 0 0 20px #00ffcc;
      margin: 1rem;
    }

    .cart h2 {
      font-family: 'Exo 2', sans-serif;
      font-size: 2rem;
      color: #00ffcc;
      text-shadow: 0 0 10px #ff00ff;
      margin-bottom: 1.5rem;
    }

    .cart-item {
      background: rgba(50, 50, 100, 0.5);
      border: 1px solid #00ffcc;
      border-radius: 10px;
      padding: 1rem;
      width: 100%;
      max-width: 500px;
      margin-bottom: 1rem;
      box-shadow: 0 0 10px #ff00ff;
      animation: neonPulse 2s infinite;
    }

    .cart-item-top {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }

    .cart-item-name {
      font-family: 'Exo 2', sans-serif;
      font-size: 1.1rem;
      color: #00ffcc;
      text-shadow: 0 0 5px #ff00ff;
    }

    .cart-controls {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .cart-controls button {
      padding: 0.5rem 1rem;
      margin: 0;
    }

    .cart-item-price {
      font-family: 'Montserrat', sans-serif;
      font-size: 0.9rem;
      color: #ff00ff;
      text-shadow: 0 0 3px #00ffcc;
    }

    .delivery-fee {
      font-family: 'Montserrat', sans-serif;
      font-size: 1.1rem;
      color: #ff00ff;
      margin-top: 1rem;
      width: 100%;
      max-width: 500px;
      text-align: right;
    }

    /* Cart and contact buttons */
    .cart-button, .contact-button {
      position: fixed;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: linear-gradient(45deg, #ff00ff, #00ffcc);
      box-shadow: 0 0 10px #00ffcc, 0 0 20px #ff00ff;
      animation: neonPulse 2s infinite;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 1.5rem;
      cursor: pointer;
      z-index: 1000;
    }

    .cart-button {
      bottom: 20px;
      right: 20px;
    }

    .contact-button {
      bottom: 20px;
      left: 20px;
    }

    /* Modal */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.95);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal-content {
      position: relative;
      max-width: 90vw;
      max-height: 80vh;
      background: rgba(10, 10, 40, 0.9);
      border: 1px solid #ff00ff;
      border-radius: 10px;
      padding: 1rem;
      box-shadow: 0 0 20px #00ffcc;
    }

    .modal-content img {
      width: 100%;
      height: auto;
      border-radius: 8px;
      box-shadow: 0 0 10px #ff00ff;
    }

    .close-button {
      position: absolute;
      top: -40px;
      right: -40px;
      background: #ff00ff;
      color: #0a0a23;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      font-size: 1.5rem;
      cursor: pointer;
      transition: background 0.2s;
    }

    .close-button:hover {
      background: #00ffcc;
    }

    /* Info icon */
    .info-icon {
      display: inline-block;
      width: 30px;
      height: 30px;
      background: #ff00ff;
      color: #0a0a23;
      border-radius: 50%;
      text-align: center;
      line-height: 30px;
      font-size: 1.2rem;
      cursor: pointer;
      margin-left: 1rem;
      transition: background 0.2s;
      animation: infoFloat 2s ease-in-out infinite;
    }

    .info-icon:hover {
      background: #00ffcc;
    }

    /* Media queries */
    @media (max-width: 768px) {
      h1 {
        font-size: 2rem;
        padding: 0.75rem;
      }

      .scrolling-text p {
        font-size: 0.9rem;
        padding-right: 1rem;
      }

      .filter-header {
        flex-direction: column;
        gap: 0.5rem;
        margin: 0.5rem;
        padding: 0.75rem;
      }

      .filter-icon {
        font-size: 1rem;
      }

      .filter-header select {
        width: 100%;
        font-size: 0.9rem;
        padding: 0.4rem 0.6rem;
      }

      .card {
        padding: 0.75rem;
      }

      .card-name {
        font-size: 1rem;
      }

      .card-description {
        font-size: 0.8rem;
      }

      .card-price {
        font-size: 1.1rem;
      }

      .vape-list, .flavour-list {
        grid-template-columns: 1fr;
        gap: 0.75rem;
        padding: 0.75rem;
      }

      .flavour-list img.vape-image {
        max-width: 150px;
      }

      .cart {
        padding: 1rem;
        margin: 0.5rem;
      }

      .cart h2 {
        font-size: 1.5rem;
      }

      .cart-item {
        max-width: 95vw;
        padding: 0.75rem;
        margin: 0.5rem auto;
      }

      .cart-item-name {
        font-size: 1rem;
      }

      .cart-item-price {
        font-size: 0.9rem;
      }

      .cart-controls button {
        padding: 0.5rem 1rem;
        font-size: 1rem;
      }

      .delivery-fee {
        font-size: 1rem;
        text-align: center;
      }

      .cart-button, .contact-button {
        width: 50px;
        height: 50px;
        font-size: 1.2rem;
      }

      .modal-content {
        max-width: 85vw;
        max-height: 70vh;
      }

      .close-button {
        top: -30px;
        right: -30px;
        width: 30px;
        height: 30px;
        font-size: 1.2rem;
      }

      .info-icon {
        width: 25px;
        height: 25px;
        line-height: 25px;
        font-size: 1rem;
      }
    }

    @media (max-width: 480px) {
      h1 {
        font-size: 1.5rem;
      }

      .vape-list, .flavour-list {
        gap: 0.5rem;
      }

      .card {
        padding: 0.5rem;
      }

      .card-name {
        font-size: 0.9rem;
      }

      .card-description {
        font-size: 0.7rem;
      }

      .card-price {
        font-size: 1rem;
      }

      .cart h2 {
        font-size: 1.2rem;
      }

      .cart-item-name {
        font-size: 0.9rem;
      }

      .cart-item-price {
        font-size: 0.8rem;
      }
    }
  </style>
</head>
<body>
  <div class="stars"></div>
  <div class="nebulae"></div>
  <div class="alien-particles"></div>
  <div class="heading-container">
    <h1>⚡ STAS_VAPE ⚡</h1>
  </div>
  <div class="scrolling-text">
    <div class="scrolling-text-container">
      <p>✅ Стас отвечает быстрее молнии — ты ещё не подумал, а он уже с ответом</p>
      <p>✅ Он чувствует твой заказ до того, как ты открыл телефон</p>
      <p>✅ У него всегда всё в наличии — даже то, чего нет больше нигде</p>
      <p>✅ Доставка? Быстрее скорости света. Флэш отдыхает</p>
      <p>✅ Оформление заказа = вайб, как в лаунж-зале премиум клуба</p>
      <p>✅ Каждую неделю — новые вейпы, как будто он главный на фабрике вкуса</p>
      <p>✅ За всю историю — 0 жалоб. Потому что СТАС НЕ ОШИБАЕТСЯ</p>
      <p>✅ Канал — кладезь позитива и 5-звёздочных отзывов</p>
      <p>✅ 24/7 в онлайне — Стас не спит, он существует ради сервиса</p>
      <p>✅ Вейпы топ-класса — вкус, который будоражит душу</p>
      <p>✅ Доставка быстрее, чем ниндзя в прыжке — просто ПУФ, и уже у двери</p>
      <p>✅ Он понимает твои желания раньше тебя — экстрасенс от мира вейпа</p>
      <p>✅ Его склад — портал в бесконечность. Закончилось? Не у него</p>
      <p>✅ Даже курьеры не верят, как он успевает</p>
      <p>✅ Заказ у Стаса — как VIP-приглашение в клуб элиты</p>
      <p>✅ Новый вкус? Новый праздник. Новый кайф. Новый вау</p>
      <p>✅ Поклонники делают фан-страницы — он не просто продавец, он ИДОЛ</p>
      <p>✅ Его поддержка — это не поддержка. Это СТАСПЕРИЕНС™</p>
      <p>✅ Он вежлив, отзывчив, и ВСЕГДА с решением</p>
      <p>✅ Каждый вейп подобран лично с заботой, будто он знает твой вкус с рождения</p>
      <p>✅ Его клиенты — как будто светятся. Потому что glow up идёт от Стаса</p>
      <p>✅ Стас — это не бренд. ЭТО ЯВЛЕНИЕ. ЭПОХА. ВЕЛИЧИЕ В ЧИСТОМ ВИДЕ</p>
      <p>✅ Доставка по всей Голландии — от Амстердама до последнего переулка</p>
      <p>✅ Бесплатная доставка при заказе от 3-х штук — бонус от щедрого сердца</p>
      <p>✅ Принимает любые способы оплаты — от карты до космических биткоинов</p>
      <p>✅ Доставка в тот же день — потому что с ним ждать не надо. НИКОГДА</p>
      <p>🔥 СТАС — ЛЕГЕНДА. ЭНЕРГИЯ. ТВОЙ ЛЮБИМЫЙ ПРОДАВЕЦ. 🔥</p>
      <p>💯 Один раз заказал — и всё, ты его клиент навсегда.</p>
    </div>
  </div>
  <div id="filterHeader" class="filter-header">
    <div class="filter-item">
      <span class="filter-icon">🏷️</span>
      <select id="markFilter" aria-label="Фильтр по марке">
        <option value="All">Все Марки</option>
        <option value="ALIENVAPE">ALIENVAPE</option>
        <option value="TORNADO">TORNADO</option>
        <option value="VOZOL">VOZOL</option>
        <option value="MEDIAMAX">MEDIAMAX</option>
        <option value="FUMOT">FUMOT</option>
        <option value="IJOY">IJOY</option>
        <option value="SHISHA VAPE">SHISHA VAPE</option>
        <option value="HAYATI">HAYATI</option>
        <option value="Cloudburst">Cloudburst</option>
      </select>
    </div>
    <div class="filter-item">
      <span class="filter-icon">%</span>
      <select id="nicotineFilter" aria-label="Фильтр по никотину">
        <option value="All">Все Никотин</option>
        <option value="2%">2%</option>
        <option value="2.5%">2.5%</option>
        <option value="5%">5%</option>
        <option value="6%">6%</option>
      </select>
    </div>
    <div class="filter-item">
      <span class="filter-icon">💨</span>
      <select id="puffFilter" aria-label="Фильтр по затяжкам">
        <option value="All">Все Затяжки</option>
        <option value="600">600</option>
        <option value="1000">1000</option>
        <option value="4500">4500</option>
        <option value="5000">5000</option>
        <option value="8000">8000</option>
        <option value="9000">9000</option>
        <option value="10000">10000</option>
        <option value="12000">12000</option>
        <option value="15000">15000</option>
        <option value="20000">20000</option>
        <option value="25000">25000</option>
        <option value="30000">30000</option>
        <option value="40000">40000</option>
      </select>
    </div>
    <div class="filter-item">
      <span class="filter-icon">€</span>
      <select id="priceFilter" aria-label="Фильтр по цене">
        <option value="All">Все Цены</option>
        <option value="10">€10</option>
        <option value="15">€15</option>
        <option value="20">€20</option>
        <option value="25">€25</option>
        <option value="30">€30</option>
        <option value="35">€35</option>
        <option value="40">€40</option>
      </select>
    </div>
  </div>
  <div id="vapeList" class="vape-list"></div>
  <div id="flavourList" class="flavour-list" style="display:none;"></div>
  <div id="cart" class="cart" style="display:none;"></div>
  <div class="cart-button" onclick="showCart()" aria-label="Открыть корзину">🛒</div>
  <div class="contact-button" onclick="window.open('https://t.me/stas_vape_nl', '_blank')" aria-label="Связаться через Telegram">👑</div>

  <script>
    // Scrolling text setup for infinite loop
    function setupScrollingText() {
      try {
        const container = document.querySelector('.scrolling-text-container');
        if (!container) throw new Error('Scrolling text container not found');
        const originalContent = container.innerHTML;
        container.innerHTML += originalContent; // Clone content for seamless loop
        const textWidth = container.scrollWidth / 2; // Width of original content
        const speed = 100; // Pixels per second
        const duration = textWidth / speed; // Duration in seconds
        container.style.animationDuration = `${duration}s`;
      } catch (error) {
        console.error('Error in setupScrollingText:', error);
      }
    }

    const vapes = [
      {
        name: "Cloudburst 20K",
        puffs: 20000,
        nicotine: "6%",
        price: 25,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/68112f384bff4cff9cc6fbd6_%D0%A2%D0%B5%D0%BA%D1%81%D1%82%20%D0%B0%D0%B1%D0%B7%D0%B0%D1%86%D0%B0.jpg",
        flavours: [
          "Blue Razz", "Blueberry", "Blueberry Mint", "Cherry Cola", "Cherry Ice",
          "Double Apple", "Grape Ice", "Hookah Banana", "Kiwi Passion Fruit", "Lemon Mint",
          "Mango Ice", "Pineapple", "Pineapple Ice", "Watermelon Ice"
        ]
      },
      {
        name: "ALIENVAPE HHC",
        puffs: 1000,
        nicotine: "5%",
        price: 40,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/680aafeefe28e1cc08e135f8_photo_2025-04-24_23-40-57.jpg",
        flavours: ["Amnesia Haze", "Mango Kush", "Super Lemon Haze", "Girl Scout Cookies", "Grape Ape"]
      },
      {
        name: "TORNADO 9K",
        puffs: 9000,
        nicotine: "5%",
        price: 20,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/66885e81ee9cc328347f1cdc_%D0%94%D0%B8%D0%B7%D0%B0%D0%B9%D0%BD%20%D0%B1%D0%B5%D0%B7%20%D0%BD%D0%B0%D0%B7%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F%20(18).png",
        flavours: ["Ice Pop", "Blueberry Sour Raspberry", "Rainbow Candy", "Guava Ice", "Mixed Berries"]
      },
      {
        name: "TORNADO 15K",
        puffs: 15000,
        nicotine: "2%",
        price: 20,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/66870572a00a5ffa6b348a97_photo_2024-06-28_23-05-58.jpg",
        flavours: [
          "Apple Peach Pear", "Banana Ice", "Blueberry Bubblegum", "Blueberry on Ice", "Blue Razz Lemonade",
          "Blueberry Raspberry", "Cola Ice", "Dragon Fruit", "Grape Ice", "Gummy Bear", "Mango on Ice",
          "Peach Blueberry Candy", "Peach Mango", "Peach Ice", "Pineapple Ice", "Red Energy Ice",
          "Strawberry Kiwi", "Strawberry Banana", "Strawberry Redbull", "Strawberry Watermelon Lemonade", "Watermelon Ice"
        ]
      },
      {
        name: "TORNADO 20K ЭКРАН",
        puffs: 20000,
        nicotine: "2%",
        price: 25,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/680aaf695af58317502f0ad5_fumot-tornado-20000-rechargeable-battery_1200x1200.webp",
        flavours: [
          "Banana Cake", "Blueberry Lemon Green Apple", "Blueberry Raspberry", "Blueberry Raspberry Hard Candy",
          "Blueberry Raspberry Sour", "Pear Ice", "Jelly Candies", "Chewy Bear Blue Razz", "Kiwi Passionfruit Guava",
          "Strawberry Watermelon", "Strawberry Kiwi", "Strawberry Ice", "Strawberry Raspberry Cherry Ice",
          "Strawberry Ice Cream", "Lychee Hami Melon", "Mixed Berries", "Mister Blue", "Peach Mango Watermelon",
          "Peach Berries", "Pina Colada", "Blue Razz", "Skittles", "Blended Berries", "Watermelon Ice",
          "Cherry", "Cherry Lime Eurasiatour", "Cherry Cola", "Cherry Berries"
        ]
      },
      {
        name: "TORNADO 20K",
        puffs: 20000,
        nicotine: "2.5%",
        price: 25,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/6800fd637ad8b0c49e9b4a8d_randm-fumot-tornado-max-20000.jpg.webp",
        flavours: [
          "Blue Razz Ice", "Blueberry Bubblegum", "Blueberry on Ice", "Blueberry Raspberry", "Grape Ice",
          "Gummy Bear", "Mixed Berries", "Peach Berry", "Peach Ice", "Red Apple Lemon", "Vimto",
          "Sour Apple", "Pineapple Ice"
        ]
      },
      {
        name: "TORNADO 25K",
        puffs: 25000,
        nicotine: "2%",
        price: 30,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/68010084b1e19ad8426e31f0_thumb_1284_0_0_0_0_auto.jpg",
        flavours: ["Double Apple", "Black Ice", "Strawberry Ice", "Miami Mint", "Cherry Cola", "Blueberry on Ice"]
      },
      {
        name: "TORNADO 30K",
        puffs: 30000,
        nicotine: "2%",
        price: 35,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/6801015be861afa63bb79692_fumot-tornado-30k-music-829692.webp",
        flavours: [
          "Peachy Mango Pineapple", "Blueberry on Ice", "Strawberry Grape", "Cola Ice", "Cherry Cola",
          "Double Apple", "Dr Blue", "Cherry Ice", "Strawberry Ice", "Strawberry Watermelon"
        ]
      },
      {
        name: "VOZOL Gear 10K",
        puffs: 10000,
        nicotine: "5%",
        price: 25,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/680101749374c38deb8e8f2f_LbjA4HjHKr7DY9FACNgDDQYZWnumvwDpv3hQghwv.webp",
        flavours: ["Strawberry Ice Cream", "Watermelon Bubblegum"]
      },
      {
        name: "VOZOL Gear 20K",
        puffs: 20000,
        nicotine: "2%",
        price: 25,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/6801018cb1e19ad8426f1e7d_VOZOL-GEAR-POWER-20000-1%20(1).jpg",
        flavours: []
      },
      {
        name: "VOZOL Gear 25K",
        puffs: 25000,
        nicotine: "5%",
        price: 30,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/680101fdcf66a1c4c100b096_vozol%2025k.png",
        flavours: ["Berry Mint", "Grape Mint", "Blue Razz Ice", "Blackberry Ice", "Berry Ice", "Blueberry Ice", "Blackcurrant Ice"]
      },
      {
        name: "VOZOL Vista Plug 15K",
        puffs: 15000,
        nicotine: "2%",
        price: 25,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/6801026f9d2ef545721d5d90_Vozol-Vista-Kit.jpg5_.webp",
        flavours: ["Sour Apple", "Kiwi Passionfruit Guava", "Cherry Cola", "Blue Razz Ice"]
      },
      {
        name: "MEDIAMAX PhoneVape 40K",
        puffs: 40000,
        nicotine: "2%",
        price: 30,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/680102844b38ea60299f8bf7_%E4%B8%BB%E5%9B%BE-1.webp",
        flavours: [
          "Strawberry Watermelon Ice", "Strawberry Ice", "Cherry Strawberry Raspberry", "Fizzy Cherry Cola",
          "Watermelon Ice", "Blue Razz Cherry", "Blueberry Raspberry", "Peach Mango Watermelon",
          "Strawberry Kiwi", "Blueberry Watermelon"
        ]
      },
      {
        name: "FUMOT Crystal 12K",
        puffs: 12000,
        nicotine: "2%",
        price: 20,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/680102a07cb5b9af192ac402_Fumot-Crystal-12000-3.jpeg",
        flavours: ["Fruity Fusion", "Watermelon Bubblegum"]
      },
      {
        name: "FUMOT Crystal 4.5K",
        puffs: 4500,
        nicotine: "2%",
        price: 20,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/680102d8891db73fae615a83_SKE_Crystal_Super_Max_4500_Puffs_Disposable_Vape_-_Blog_7eeb6280-186a-42c2-a1a9-e11c0b482fda.webp",
        flavours: [
          "Lemon & Lime", "Blueberry Cherry Cranberry", "Strawberry Raspberry Cherry", "Fresh Menthol Mojito",
          "Juicy Blueberry", "Watermelon Strawberry", "Apple Watermelon", "Cola Ice"
        ]
      },
      {
        name: "FUMOT Crystal 600",
        puffs: 600,
        nicotine: "2%",
        price: 10,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/680103086570a3c8dc130efc_fumot-randm-crystal-600ec597076-2ce2-4893-86cc-9eab1c467eb0.webp",
        flavours: [
          "Rainbow", "Blueberry Sour Raspberry", "Blueberry Peach Ice", "Starfruit Mulberry Lemon",
          "Lemon & Lime", "Pineapple Peach Mango", "Kiwi Passionfruit Guava", "Blue Razz Lemonade", "Apple Peach"
        ]
      },
      {
        name: "IJOY 40K",
        puffs: 40000,
        nicotine: "2%",
        price: 30,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/68010323d85907bb35fc96c2_ijoy-sd40000-40k-puffs-ai-voice-control-disposable_1200x1200%20(2).webp",
        flavours: [
          "Strawberry Kiwi", "Peach Mango Watermelon", "Cherry Lemon", "Peach Ice",
          "Kiwi Passionfruit Guava", "Cotton Candy", "Watermelon Ice"
        ]
      },
      {
        name: "SHISHA VAPE AlFakher 8K",
        puffs: 8000,
        nicotine: "6%",
        price: 20,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/6801034ea74e06c09e2092fc_Al-Fakher-Crown-Bar-PRO-8K-Al-Fakher-262869460.webp",
        flavours: [
          "Berry Blue", "Hubba", "Gum Mint", "Grape Mint", "Space Dream",
          "Magic Love", "Peach Ice", "Blueberry Gum", "Lemon Mint", "Cherry Fiesta"
        ]
      },
      {
        name: "HAYATI Twist 5K",
        puffs: 5000,
        nicotine: "2%",
        price: 15,
        image: "https://cdn.prod.website-files.com/6685befcece47fe6d2a75ef8/680b5e76158e6c535ea33158_Hayati_Twist_5000_Disposable_Vape.webp",
        flavours: ["Passionfruit Lemon Lime", "Kiwi Lemon", "Summer Dream", "Strawberry Gummy Bear", "Strawberry Kiwi"]
      }
    ];

    const flavourEmojis = {
      "Amnesia Haze": "🌿", "Mango Kush": "🥭", "Super Lemon Haze": "🍋", "Girl Scout Cookies": "🍪", "Grape Ape": "🍇",
      "Ice Pop": "🧊", "Blueberry Sour Raspberry": "🫐", "Rainbow Candy": "🌈", "Guava Ice": "🥑", "Mixed Berries": "🍓",
      "Apple Peach Pear": "🍎", "Banana Ice": "🍌", "Blueberry Bubblegum": "🫐", "Blueberry on Ice": "🫐", "Blue Razz Lemonade": "🫐",
      "Blueberry Raspberry": "🫐", "Cola Ice": "🥤", "Dragon Fruit": "🐉", "Grape Ice": "🍇", "Gummy Bear": "🐻",
      "Mango on Ice": "🥭", "Peach Blueberry Candy": "🍑", "Peach Mango": "🍑", "Peach Ice": "🍑", "Pineapple Ice": "🍍",
      "Red Energy Ice": "⚡", "Strawberry Kiwi": "🍓", "Strawberry Banana": "🍓", "Strawberry Redbull": "🍓", "Strawberry Watermelon Lemonade": "🍓",
      "Watermelon Ice": "🍉", "Blue Razz Ice": "🫐", "Sour Apple": "🍏", "Double Apple": "🍎",
      "Black Ice": "🖤", "Strawberry Ice": "🍓", "Miami Mint": "🌿", "Cherry Cola": "🍒", "Peachy Mango Pineapple": "🍑",
      "Strawberry Grape": "🍓", "Dr Blue": "🫐", "Cherry Ice": "🍒", "Strawberry Watermelon": "🍓", "Strawberry Ice Cream": "🍓",
      "Watermelon Bubblegum": "🍉", "Berry Mint": "🍓", "Grape Mint": "🍇", "Blackberry Ice": "🫐", "Berry Ice": "🍓",
      "Blueberry Ice": "🫐", "Blackcurrant Ice": "🫐", "Kiwi Passionfruit Guava": "🥝", "Strawberry Watermelon Ice": "🍓",
      "Cherry Strawberry Raspberry": "🍒", "Fizzy Cherry Cola": "🍒", "Blue Razz Cherry": "🫐", "Peach Mango Watermelon": "🍑",
      "Blueberry Watermelon": "🫐", "Fruity Fusion": "🍈", "Lemon & Lime": "🍋", "Blueberry Cherry Cranberry": "🫐",
      "Strawberry Raspberry Cherry": "🍓", "Fresh Menthol Mojito": "🌿", "Juicy Blueberry": "🫐", "Watermelon Strawberry": "🍓",
      "Apple Watermelon": "🍎", "Rainbow": "🌈", "Blueberry Peach Ice": "🫐", "Starfruit Mulberry Lemon": "🍋",
      "Pineapple Peach Mango": "🍍", "Blue Razz Lemonade": "🫐", "Apple Peach": "🍎", "Cherry Lemon": "🍒",
      "Cotton Candy": "🍬", "Berry Blue": "🫐", "Hubba": "🍬", "Gum Mint": "🌿", "Space Dream": "🌌",
      "Magic Love": "💖", "Blueberry Gum": "🫐", "Lemon Mint": "🍋", "Cherry Fiesta": "🍒",
      "Banana Cake": "🍌", "Blueberry Lemon Green Apple": "🫐", "Blueberry Raspberry Hard Candy": "🫐",
      "Blueberry Raspberry Sour": "🫐", "Pear Ice": "🍐", "Jelly Candies": "🍬", "Chewy Bear Blue Razz": "🐻",
      "Strawberry Raspberry Cherry Ice": "🍓", "Lychee Hami Melon": "🍈", "Mister Blue": "🫐",
      "Peach Berries": "🍑", "Pina Colada": "🍍", "Blue Razz": "🫐", "Skittles": "🍬", "Blended Berries": "🍓",
      "Cherry": "🍒", "Cherry Lime Eurasiatour": "🍒", "Cherry Berries": "🍒",
      "Passionfruit Lemon Lime": "🍋", "Kiwi Lemon": "🥝", "Summer Dream": "☀️", "Strawberry Gummy Bear": "🍓",
      "Blueberry": "🫐", "Blueberry Mint": "🫐", "Hookah Banana": "🍌", "Kiwi Passion Fruit": "🥝",
      "Mango Ice": "🥭", "Pineapple": "🍍", "Peach Berry": "🍑", "Red Apple Lemon": "🍎", "Vimto": "🍇"
    };

    let cart = [];

    const vapeListEl = document.getElementById('vapeList');
    const flavourListEl = document.getElementById('flavourList');
    const cartEl = document.getElementById('cart');
    const filterHeaderEl = document.getElementById('filterHeader');
    const markFilter = document.getElementById('markFilter');
    const nicotineFilter = document.getElementById('nicotineFilter');
    const puffFilter = document.getElementById('puffFilter');
    const priceFilter = document.getElementById('priceFilter');

    const neonColors = ['#ff00ff', '#00ffcc', '#8a00a2', '#00ff00', '#00b7eb'];

    function renderVapes() {
      try {
        if (!vapeListEl) throw new Error('Vape list element not found');
        const mark = markFilter.value;
        const nicotine = nicotineFilter.value;
        const puffs = puffFilter.value;
        const price = priceFilter.value;

        vapeListEl.innerHTML = '';
        const filteredVapes = vapes.filter(vape => {
          const matchMark = mark === 'All' || vape.name.includes(mark);
          const matchNicotine = nicotine === 'All' || vape.nicotine === nicotine;
          const matchPuffs = puffs === 'All' || vape.puffs.toString() === puffs;
          const matchPrice = price === 'All' || vape.price.toString() === price;
          return matchMark && matchNicotine && matchPuffs && matchPrice;
        });

        if (filteredVapes.length === 0) {
          const noVapesMsg = document.createElement('p');
          noVapesMsg.textContent = 'Нет вейпов, соответствующих фильтрам';
          noVapesMsg.style.margin = '1rem';
          noVapesMsg.style.fontFamily = "'Montserrat', sans-serif";
          noVapesMsg.style.textShadow = '0 0 5px #ff00ff';
          vapeListEl.appendChild(noVapesMsg);
        } else {
          filteredVapes.forEach((vape, index) => {
            const card = document.createElement('div');
            card.className = 'card';
            card.style.boxShadow = `0 0 10px ${neonColors[index % neonColors.length]}`;
            card.innerHTML = `
              <img src="${vape.image}" alt="${vape.name}" loading="lazy">
              <div class="card-name">${vape.name}</div>
              <div class="card-description">Никотин: ${vape.nicotine}</div>
              <div class="card-description">Затяжек: ${vape.puffs}</div>
              <div class="card-price">€${vape.price}</div>
            `;
            card.onclick = () => showFlavours(vape);
            vapeListEl.appendChild(card);
          });
        }
      } catch (error) {
        console.error('Error in renderVapes:', error);
        if (vapeListEl) {
          const errorMsg = document.createElement('p');
          errorMsg.textContent = 'Ошибка при загрузке вейпов. Пожалуйста, попробуйте позже.';
          errorMsg.style.margin = '1rem';
          errorMsg.style.fontFamily = "'Montserrat', sans-serif";
          errorMsg.style.textShadow = '0 0 5px #ff00ff';
          vapeListEl.appendChild(errorMsg);
        }
      }
    }

    function showImageModal(src, alt) {
      try {
        const modal = document.createElement('div');
        modal.className = 'modal';
        modal.innerHTML = `
          <div class="modal-content" role="dialog" aria-label="Увеличенное изображение">
            <img src="${src}" alt="${alt}" loading="lazy">
            <button class="close-button" aria-label="Закрыть модальное окно">×</button>
          </div>
        `;
        document.body.appendChild(modal);

        const closeModal = () => {
          modal.remove();
        };

        modal.querySelector('.close-button').onclick = closeModal;
        modal.onclick = (e) => {
          if (e.target === modal) closeModal();
        };
        modal.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') closeModal();
        });
      } catch (error) {
        console.error('Error in showImageModal:', error);
      }
    }

    function showFlavours(vape) {
      try {
        if (!flavourListEl || !vapeListEl || !cartEl || !filterHeaderEl) {
          throw new Error('Required elements not found');
        }
        vapeListEl.style.display = 'none';
        cartEl.style.display = 'none';
        filterHeaderEl.style.display = 'none';
        flavourListEl.style.display = 'grid';
        flavourListEl.innerHTML = '';

        const headingWrapper = document.createElement('div');
        headingWrapper.style.display = 'flex';
        headingWrapper.style.alignItems = 'center';
        headingWrapper.style.justifyContent = 'center';
        headingWrapper.style.width = '100%';

        const heading = document.createElement('h2');
        heading.style.fontFamily = "'Exo 2', sans-serif";
        heading.style.fontSize = '1.8rem';
        heading.style.color = '#00ffcc';
        heading.style.textShadow = '0 0 10px #ff00ff';
        heading.textContent = `Выберите вкус для ${vape.name}`;
        headingWrapper.appendChild(heading);

        if (vape.name.includes('ALIENVAPE')) {
          const infoIcon = document.createElement('a');
          infoIcon.className = 'info-icon';
          infoIcon.textContent = 'ℹ';
          infoIcon.href = 'https://telegra.ph/Alienvape---Stas-04-24';
          infoIcon.target = '_blank';
          infoIcon.setAttribute('aria-label', 'Информация об ALIENVAPE');
          headingWrapper.appendChild(infoIcon);
        }

        flavourListEl.appendChild(headingWrapper);

        const vapeImage = document.createElement('img');
        vapeImage.className = 'vape-image';
        vapeImage.src = vape.image;
        vapeImage.alt = `${vape.name} изображение`;
        vapeImage.loading = 'lazy';
        vapeImage.onclick = () => showImageModal(vape.image, vape.name);
        flavourListEl.appendChild(vapeImage);

        const selectedFlavours = new Set();

        const flavourWrap = document.createElement('div');
        flavourWrap.style.flexWrap = 'wrap';
        flavourWrap.style.display = 'grid';
        flavourWrap.style.gridTemplateColumns = 'repeat(auto-fit, minmax(180px, 1fr))';
        flavourWrap.style.justifyContent = 'center';
        flavourWrap.style.gap = '1rem';

        if (vape.flavours.length === 0) {
          const noFlavoursMsg = document.createElement('p');
          noFlavoursMsg.textContent = 'Нет доступных вкусов.';
          noFlavoursMsg.style.margin = '1rem';
          noFlavoursMsg.style.fontFamily = "'Montserrat', sans-serif";
          noFlavoursMsg.style.textShadow = '0 0 5px #ff00ff';
          flavourWrap.appendChild(noFlavoursMsg);
        } else {
          vape.flavours.forEach(flavour => {
            const card = document.createElement('div');
            card.className = 'card';
            const emoji = flavourEmojis[flavour] || '🍬';
            card.innerText = `${emoji} ${flavour}`;
            card.onclick = () => {
              if (selectedFlavours.has(flavour)) {
                selectedFlavours.delete(flavour);
                card.classList.remove('selected');
              } else {
                selectedFlavours.add(flavour);
                card.classList.add('selected');
              }
            };
            flavourWrap.appendChild(card);
          });
        }

        const bottomButtons = document.createElement('div');
        bottomButtons.style.width = '100%';
        bottomButtons.style.display = 'flex';
        bottomButtons.style.justifyContent = 'space-between';
        bottomButtons.style.marginTop = '20px';

        const backBtn = document.createElement('button');
        backBtn.textContent = '⬅ Назад';
        backBtn.setAttribute('aria-label', 'Вернуться к списку вейпов');
        backBtn.onclick = () => goBack();

        const addBtn = document.createElement('button');
        addBtn.textContent = '➕ В корзину';
        addBtn.setAttribute('aria-label', 'Добавить в корзину');
        addBtn.disabled = vape.flavours.length === 0;
        addBtn.onclick = () => {
          if (vape.flavours.length > 0 && selectedFlavours.size === 0) {
            alert('Пожалуйста, выберите хотя бы один вкус!');
            return;
          }
          selectedFlavours.forEach(flavour => {
            cart.push({ vape: vape.name, flavour, price: vape.price, qty: 1 });
          });
          showCart();
        };

        bottomButtons.appendChild(backBtn);
        bottomButtons.appendChild(addBtn);

        flavourListEl.appendChild(flavourWrap);
        flavourListEl.appendChild(bottomButtons);
      } catch (error) {
        console.error('Error in showFlavours:', error);
        if (flavourListEl) {
          flavourListEl.innerHTML = '<p style="margin: 1rem; font-family: \'Montserrat\', sans-serif; text-shadow: 0 0 5px #ff00ff;">Ошибка при загрузке вкусов. Пожалуйста, попробуйте позже.</p>';
        }
      }
    }

    function goBack() {
      try {
        if (!flavourListEl || !vapeListEl || !cartEl || !filterHeaderEl) {
          throw new Error('Required elements not found');
        }
        flavourListEl.style.display = 'none';
        cartEl.style.display = 'none';
        vapeListEl.style.display = 'grid';
        filterHeaderEl.style.display = 'flex';
        renderVapes();
      } catch (error) {
        console.error('Error in goBack:', error);
      }
    }

    function showCart() {
      try {
        if (!flavourListEl || !vapeListEl || !cartEl || !filterHeaderEl) {
          throw new Error('Required elements not found');
        }
        vapeListEl.style.display = 'none';
        flavourListEl.style.display = 'none';
        filterHeaderEl.style.display = 'none';
        cartEl.style.display = 'flex';
        updateCart();
      } catch (error) {
        console.error('Error in showCart:', error);
      }
    }

    function updateCart() {
      try {
        if (!cartEl) throw new Error('Cart element not found');
        cartEl.innerHTML = '<h2>🛒 Корзина ✨</h2>';
        let total = 0;
        let totalQty = 0;

        const itemsWrap = document.createElement('div');
        itemsWrap.style.width = '100%';
        itemsWrap.style.display = 'flex';
        itemsWrap.style.flexDirection = 'column';
        itemsWrap.style.gap = '1rem';

        cart.forEach((item, i) => {
          const itemContainer = document.createElement('div');
          itemContainer.className = 'cart-item';

          const topRow = document.createElement('div');
          topRow.className = 'cart-item-top';

          const name = document.createElement('div');
          name.className = 'cart-item-name';
          name.innerHTML = `<strong>🧨 ${item.vape}</strong><br>${item.flavour}`;

          const controls = document.createElement('div');
          controls.className = 'cart-controls';

          const minus = document.createElement('button');
          minus.textContent = '−';
          minus.setAttribute('aria-label', 'Уменьшить количество');
          minus.onclick = () => {
            if (item.qty > 1) item.qty--;
            else cart.splice(i, 1);
            updateCart();
          };

          const qty = document.createElement('span');
          qty.textContent = item.qty;

          const plus = document.createElement('button');
          plus.textContent = '+';
          plus.setAttribute('aria-label', 'Увеличить количество');
          plus.onclick = () => {
            item.qty++;
            updateCart();
          };

          controls.appendChild(minus);
          controls.appendChild(qty);
          controls.appendChild(plus);

          topRow.appendChild(name);
          topRow.appendChild(controls);
          itemContainer.appendChild(topRow);

          const price = document.createElement('div');
          price.className = 'cart-item-price';
          price.textContent = `€${item.price} / шт`;

          itemContainer.appendChild(price);
          itemsWrap.appendChild(itemContainer);

          total += item.price * item.qty;
          totalQty += item.qty;
        });

        cartEl.appendChild(itemsWrap);

        const deliveryFee = totalQty < 3 ? 10 : 0;
        if (deliveryFee > 0) {
          const deliveryDiv = document.createElement('div');
          deliveryDiv.className = 'delivery-fee';
          deliveryDiv.textContent = `Доставка (от 3 штук бесплатная доставка): €${deliveryFee.toFixed(2)}`;
          cartEl.appendChild(deliveryDiv);
        }

        total += deliveryFee;

        const btnRow = document.createElement('div');
        btnRow.style.marginTop = '2rem';
        btnRow.style.display = 'flex';
        btnRow.style.justifyContent = 'space-between';
        btnRow.style.width = '100%';
        btnRow.style.maxWidth = '500px';

        const backBtn = document.createElement('button');
        backBtn.textContent = '⬅ Назад';
        backBtn.setAttribute('aria-label', 'Вернуться к списку вейпов');
        backBtn.onclick = () => goBack();

        const orderBtn = document.createElement('button');
        orderBtn.textContent = '📩 Оформить заказ';
        orderBtn.setAttribute('aria-label', 'Оформить заказ через Telegram');
        orderBtn.disabled = cart.length === 0;
        orderBtn.onclick = () => {
          let message = 'Заказ:\n';
          cart.forEach(item => {
            message += `${item.vape} (${item.flavour}) - ${item.qty} шт, €${item.price * item.qty}\n`;
          });
          message += `Итого: €${total.toFixed(2)}`;
          if (deliveryFee > 0) {
            message += `\nДоставка: €${deliveryFee.toFixed(2)}`;
          } else {
            message += '\nДоставка: Бесплатно';
          }
          const encodedMessage = encodeURIComponent(message);
          window.open(`https://t.me/stas_vape_nl?text=${encodedMessage}`, '_blank');
        };

        btnRow.appendChild(backBtn);
        btnRow.appendChild(orderBtn);
        cartEl.appendChild(btnRow);
      } catch (error) {
        console.error('Error in updateCart:', error);
        if (cartEl) {
          cartEl.innerHTML = '<p style="margin: 1rem; font-family: \'Montserrat\', sans-serif; text-shadow: 0 0 5px #ff00ff;">Ошибка при загрузке корзины. Пожалуйста, попробуйте позже.</p>';
        }
      }
    }

    // Initialize
    try {
      setupScrollingText();
      renderVapes();
      markFilter.addEventListener('change', renderVapes);
      nicotineFilter.addEventListener('change', renderVapes);
      puffFilter.addEventListener('change', renderVapes);
      priceFilter.addEventListener('change', renderVapes);
      window.addEventListener('resize', setupScrollingText);
    } catch (error) {
      console.error('Initialization error:', error);
    }
  </script>
</body>
</html>
