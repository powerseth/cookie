<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üö¨ Vape 9000 üõ∏</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #111;
      color: #fff;
      overflow-x: hidden;
    }

    .screen {
      display: none;
      padding: 20px;
    }

    .active {
      display: block;
    }

    .welcome-screen {
      text-align: center;
      padding: 30px 20px;
      background: linear-gradient(to right, #8e2de2, #4a00e0);
      font-size: 1.8em;
      color: #fff;
      animation: glow 1.5s ease-in-out infinite alternate;
    }

    @keyframes glow {
      0% { text-shadow: 0 0 10px #fff, 0 0 20px #ff00ff; }
      100% { text-shadow: 0 0 20px #fff, 0 0 30px #ff00ff; }
    }

    .filters {
      position: sticky;
      top: 0;
      background: #1e1e1e;
      padding: 10px;
      display: flex;
      justify-content: space-around;
      border-bottom: 1px solid #333;
      z-index: 999;
    }

    .filters select {
      background: #333;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
    }

    .product-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .product-card {
      background: #222;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
    }

    .product-card img {
      width: 100%;
      border-radius: 5px;
    }

    .product-card h3 {
      color: #ff00ff;
      font-size: 1.1em;
    }

    .product-card p {
      margin: 6px 0;
    }

    .product-card button,
    .bottom-button,
    .cart-button {
      background: #ff00ff;
      color: #fff;
      border: none;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 8px;
      width: 100%;
    }

    .product-card button:hover,
    .bottom-button:hover,
    .cart-button:hover {
      background: #d400d4;
    }

    .bottom-button {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      font-size: 1em;
    }

    .cart-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 10px 0;
    }

    .cart-controls button {
      margin: 0 5px;
    }

    .cart-summary {
      margin-top: 20px;
      font-size: 1.2em;
    }

    .finish-buttons {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <div class="screen active" id="screen-choose">
    <div class="welcome-screen">
      üö¨ Vape 9000 üõ∏ <br> –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∏—Ä –≤–∫—É—Å–∞
    </div>

    <div class="filters">
      <select id="nicotine">
        <option value="all">–ö—Ä–µ–ø–æ—Å—Ç—å</option>
        <option value="2%">2%</option>
        <option value="2.5%">2.5%</option>
        <option value="5%">5%</option>
        <option value="6%">6%</option>
      </select>
      <select id="puffs">
        <option value="all">–ó–∞—Ç—è–∂–∫–∏</option>
        <option value="10000">–î–æ 10k</option>
        <option value="20000">10k-20k</option>
        <option value="30000">20k-30k</option>
        <option value="40000">40k+</option>
      </select>
      <select id="price">
        <option value="all">–¶–µ–Ω–∞</option>
        <option value="10">‚Ç¨10-‚Ç¨20</option>
        <option value="20">‚Ç¨20-‚Ç¨30</option>
        <option value="30">‚Ç¨30+</option>
      </select>
    </div>

    <div class="product-list" id="product-list"></div>
    <button class="bottom-button" onclick="goToCart()">–ö–æ—Ä–∑–∏–Ω–∞ –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</button>
  </div>

  <div class="screen" id="screen-cart">
    <h2>üõí –ö–æ—Ä–∑–∏–Ω–∞</h2>
    <div id="cart-items"></div>
    <div class="cart-summary">–°—É–º–º–∞: ‚Ç¨<span id="cart-total">0</span></div>
    <div class="finish-buttons">
      <button onclick="goToChoose()">‚Üê –ù–∞–∑–∞–¥</button>
      <button onclick="goToFinish()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å ‚Üí</button>
    </div>
  </div>

  <div class="screen" id="screen-finish">
    <h2>–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ</h2>
    <div class="finish-buttons">
      <button onclick="sendToStas()">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å –°—Ç–∞—Å—É</button>
      <button onclick="goToCart()">‚Üê –ù–∞–∑–∞–¥</button>
      <button onclick="goToChannel()">üì£ –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞–Ω–∞–ª</button>
    </div>
  </div>

  <script>
    const products = JSON.parse(`__PRODUCTS__`);
    let cart = [];

    function displayProducts(filtered) {
      const list = document.getElementById('product-list');
      list.innerHTML = '';
      filtered.forEach(p => {
        list.innerHTML += `
          <div class="product-card">
            <img src="${p.image}" alt="${p.name}">
            <h3>${p.name}</h3>
            <p>–ö—Ä–µ–ø–æ—Å—Ç—å: ${p.nicotine}</p>
            <p>–ó–∞—Ç—è–∂–µ–∫: ${p.puffs}</p>
            <p>–¶–µ–Ω–∞: ‚Ç¨${p.price}</p>
            <button onclick="addToCart('${p.name}', ${p.price})">–î–æ–±–∞–≤–∏—Ç—å</button>
          </div>
        `;
      });
    }

    function filterProducts() {
      const nic = document.getElementById('nicotine').value;
      const puf = document.getElementById('puffs').value;
      const pri = document.getElementById('price').value;

      const filtered = products.filter(p => {
        return (nic === 'all' || p.nicotine === nic) &&
               (puf === 'all' || p.puffs >= parseInt(puf)) &&
               (pri === 'all' || p.price <= parseInt(pri));
      });

      displayProducts(filtered);
    }

    function addToCart(name, price) {
      const item = cart.find(i => i.name === name);
      if (item) {
        item.qty += 1;
      } else {
        cart.push({ name, price, qty: 1 });
      }
      updateCart();
    }

    function updateCart() {
      const container = document.getElementById('cart-items');
      container.innerHTML = '';
      let total = 0;

      cart.forEach((item, i) => {
        total += item.price * item.qty;
        container.innerHTML += `
          <div class="cart-item">
            <span>${item.name} (‚Ç¨${item.price})</span>
            <div class="cart-controls">
              <button onclick="changeQty(${i}, -1)">-</button>
              ${item.qty}
              <button onclick="changeQty(${i}, 1)">+</button>
            </div>
          </div>
        `;
      });

      document.getElementById('cart-total').innerText = total;
    }

    function changeQty(index, delta) {
      cart[index].qty += delta;
      if (cart[index].qty <= 0) cart.splice(index, 1);
      updateCart();
    }

    function showScreen(id) {
      document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function goToCart() {
      updateCart();
      showScreen('screen-cart');
    }

    function goToChoose() {
      showScreen('screen-choose');
    }

    function goToFinish() {
      showScreen('screen-finish');
    }

    function sendToStas() {
      alert("üõí –ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –°—Ç–∞—Å—É!");
      console.log("–û—Ç–ø—Ä–∞–≤–∫–∞:", cart);
      cart = [];
      updateCart();
      goToChoose();
    }

    function goToChannel() {
      window.open("https://t.me/yourchannel", "_blank");
    }

    document.getElementById('nicotine').addEventListener('change', filterProducts);
    document.getElementById('puffs').addEventListener('change', filterProducts);
    document.getElementById('price').addEventListener('change', filterProducts);

    filterProducts();
  </script>
</body>
</html>
